{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import MyClubs from'./myClubs';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Profile(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),clubData=_useState4[0],setClubData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoaded=_useState6[0],setIsLoaded=_useState6[1];var navigate=useNavigate();var checkAdmin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var storedToken,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:storedToken=JSON.parse(localStorage.getItem('authorization'));if(!(storedToken!==null)){_context.next=15;break;}_context.prev=2;_context.next=5;return axios.get(\"http://192.168.1.29:4000/checkadmin/\".concat(storedToken));case 5:response=_context.sent;data=response.data;if(data.isLoggedIn){setUserData(data.user);}else{navigate('/login');}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);navigate('/login');case 13:_context.next=16;break;case 15:navigate('/login');case 16:case\"end\":return _context.stop();}},_callee,null,[[2,10]]);}));return function checkAdmin(){return _ref.apply(this,arguments);};}();var getClubData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var storedToken,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:storedToken=JSON.parse(localStorage.getItem('authorization'));_context2.next=3;return axios.get(\"http://192.168.1.29:4000/myclubs/\".concat(storedToken));case 3:res=_context2.sent;setClubData(res.data.clubs);case 5:case\"end\":return _context2.stop();}},_callee2);}));return function getClubData(){return _ref2.apply(this,arguments);};}();useEffect(function(){checkAdmin();},[]);useEffect(function(){if(userData){setIsLoaded(true);}getClubData();},[userData]);return/*#__PURE__*/_jsx(_Fragment,{children:isLoaded&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center text-3xl text-white animate-fade-up animate-once animate-duration-200\",children:[\"Merhaba \",userData.name,\" \",userData.permissions.includes(\"admin\")&&/*#__PURE__*/_jsx(\"a\",{className:\"text-red-600\",children:\"(Admin)\"})]}),clubData&&/*#__PURE__*/_jsx(MyClubs,{clubData:clubData})]})});}export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","MyClubs","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","_useState","_useState2","_slicedToArray","userData","setUserData","_useState3","_useState4","clubData","setClubData","_useState5","_useState6","isLoaded","setIsLoaded","navigate","checkAdmin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","storedToken","response","data","wrap","_callee$","_context","prev","next","JSON","parse","localStorage","getItem","get","concat","sent","isLoggedIn","user","t0","stop","apply","arguments","getClubData","_ref2","_callee2","res","_callee2$","_context2","clubs","children","className","name","permissions","includes"],"sources":["C:/Users/youtu/OneDrive/Masaüstü/united-clubs/client/src/Profile/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport MyClubs from './myClubs';\r\nimport axios from 'axios';\r\n\r\nfunction Profile() {\r\n    const [userData, setUserData] = useState(null);\r\n    const [clubData, setClubData] = useState(null);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    const checkAdmin = async () => {\r\n        const storedToken = JSON.parse(localStorage.getItem('authorization'));\r\n        if (storedToken !== null) {\r\n            try {\r\n                const response = await axios.get(`http://192.168.1.29:4000/checkadmin/${storedToken}`);\r\n                const data = response.data;\r\n\r\n                if (data.isLoggedIn) {\r\n                    setUserData(data.user);\r\n                } else {\r\n                    navigate('/login');\r\n                }\r\n            } catch (error) {\r\n                navigate('/login');\r\n            }\r\n        } else {\r\n            navigate('/login');\r\n        }\r\n    };\r\n\r\n    const getClubData = async () => {\r\n        const storedToken = JSON.parse(localStorage.getItem('authorization'));\r\n        const res = await axios.get(`http://192.168.1.29:4000/myclubs/${storedToken}`);\r\n        setClubData(res.data.clubs);\r\n    }\r\n\r\n    useEffect(() => {\r\n        checkAdmin();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (userData) {\r\n            setIsLoaded(true);\r\n        }\r\n        getClubData();\r\n    }, [userData]);\r\n\r\n    return (\r\n        <>\r\n            {isLoaded && (\r\n                <>\r\n                    <h1 className='text-center text-3xl text-white animate-fade-up animate-once animate-duration-200'>Merhaba {userData.name} {userData.permissions.includes(\"admin\")\r\n                        && (<a className='text-red-600'>(Admin)</a>)}</h1>\r\n                    {clubData && (\r\n                        <MyClubs clubData={clubData} />\r\n                    )}\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}