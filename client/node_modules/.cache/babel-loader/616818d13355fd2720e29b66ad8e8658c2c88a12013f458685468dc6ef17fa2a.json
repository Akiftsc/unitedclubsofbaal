{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from'react';import emailjs from'@emailjs/browser';import{useNavigate,Link}from'react-router-dom';import axios from'axios';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function ClubDetail(_ref){var pickedClub=_ref.pickedClub,setRegister=_ref.setRegister,register=_ref.register;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sure=_useState2[0],setSure=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),toast=_useState4[0],setToast=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),firstPerm=_useState6[0],setFirstPerm=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),templateParams=_useState8[0],setTemplateParams=_useState8[1];var navigate=useNavigate();var checkAdmin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var storedToken,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:storedToken=JSON.parse(localStorage.getItem(\"authorization\"));if(!(storedToken!==null)){_context.next=13;break;}_context.prev=2;_context.next=5;return axios.get(\"http://192.168.1.29:4000/checkadmin/\".concat(JSON.parse(localStorage.getItem(\"authorization\"))));case 5:response=_context.sent;data=response.data;if(data.isLoggedIn){setSure(true);setTemplateParams(_objectSpread(_objectSpread({},data.user),{},{pickedClub:pickedClub}));}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);alert(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[2,10]]);}));return function checkAdmin(){return _ref2.apply(this,arguments);};}();if(firstPerm){if(localStorage.getItem(\"authorization\")!==null){checkAdmin();setFirstPerm(false);}else{setFirstPerm(false);alert(\"Kulübe katılabilmek için bir hesabınız olmalı.\");navigate(\"/register\");}}var joinClub=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.post(\"http://192.168.1.29:4000/attend\",templateParams,{headers:{Accept:'application/json','Content-Type':'application/json',\"authorization\":JSON.parse(localStorage.getItem(\"authorization\"))}});case 4:response=_context2.sent;data=response.data;if(data.success){setToast(true);emailjs.send('service_rdm14rp','template_j3tmv2e',templateParams,'oQT0rtKXghENul39r').then(function(response){console.log('SUCCESS...',response.text);},function(err){console.log('FAILED...',err);});}else{setToast(false);console.log(data.message);}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);alert(_context2.t0.response.data.message);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[1,9]]);}));return function joinClub(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full p-3 rounded overflow-hidden mb-10 bg-slate-800 text-white\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center text-2xl mb-1\",children:[pickedClub.name,\" kul\\xFCb\\xFC\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-center my-5\",children:pickedClub.description}),/*#__PURE__*/_jsx(Link,{to:\"/clubs/\".concat(pickedClub._id),className:\"text-red-600 underline cursor-pointer\",children:\"Detay\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-6\",onClick:function onClick(e){setFirstPerm(true);e.target.style.display=\"none\";},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",children:\"Kaydolmak ister misin?\"})}),sure&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-6\",onClick:joinClub,children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",children:\"Emin misin? kul\\xFCp sahibine bildirim gidecek.\"})}),toast&&/*#__PURE__*/_jsx(\"div\",{className:\"toast toast-top toast-end\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Ba\\u015Far\\u0131yla G\\xF6nderildi.\"})})}),toast===false&&/*#__PURE__*/_jsx(\"div\",{className:\"toast toast-top toast-end\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Bir Hata Olu\\u015Ftu\"})})})]});}export default ClubDetail;","map":{"version":3,"names":["React","useState","emailjs","useNavigate","Link","axios","jsxs","_jsxs","jsx","_jsx","ClubDetail","_ref","pickedClub","setRegister","register","_useState","_useState2","_slicedToArray","sure","setSure","_useState3","_useState4","toast","setToast","_useState5","_useState6","firstPerm","setFirstPerm","_useState7","_useState8","templateParams","setTemplateParams","navigate","checkAdmin","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","storedToken","response","data","wrap","_callee$","_context","prev","next","JSON","parse","localStorage","getItem","get","concat","sent","isLoggedIn","_objectSpread","user","t0","alert","stop","apply","arguments","joinClub","_ref3","_callee2","e","_callee2$","_context2","preventDefault","post","headers","Accept","success","send","then","console","log","text","err","message","_x","className","children","name","description","to","_id","onClick","target","style","display"],"sources":["C:/Users/youtu/OneDrive/Masaüstü/united-clubs/client/src/components/ClubDetail.js"],"sourcesContent":["import React from 'react';\r\nimport { useState } from 'react';\r\nimport emailjs from '@emailjs/browser';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction ClubDetail({ pickedClub, setRegister, register }) {\r\n    const [sure, setSure] = useState(false);\r\n    const [toast, setToast] = useState(null);\r\n    const [firstPerm, setFirstPerm] = useState(false);\r\n    const [templateParams, setTemplateParams] = useState({});\r\n    const navigate = useNavigate();\r\n\r\n\r\n\r\n    const checkAdmin = async () => {\r\n        const storedToken = JSON.parse(localStorage.getItem(\"authorization\"));\r\n        if (storedToken !== null) {\r\n            try {\r\n                const response = await axios.get(`http://192.168.1.29:4000/checkadmin/${JSON.parse(localStorage.getItem(\"authorization\"))}`);\r\n                const data = response.data;\r\n                if (data.isLoggedIn) {\r\n                    setSure(true);\r\n                    setTemplateParams({ ...data.user, pickedClub });\r\n                }\r\n            } catch (error) {\r\n                alert(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (firstPerm) {\r\n        if (localStorage.getItem(\"authorization\") !== null) {\r\n            checkAdmin();\r\n            setFirstPerm(false);\r\n        }\r\n        else {\r\n            setFirstPerm(false);\r\n            alert(\"Kulübe katılabilmek için bir hesabınız olmalı.\")\r\n            navigate(\"/register\");\r\n        }\r\n    }\r\n\r\n    const joinClub = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await axios.post(\"http://192.168.1.29:4000/attend\", templateParams, {\r\n                headers: {\r\n                    Accept: 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                    \"authorization\": JSON.parse(localStorage.getItem(\"authorization\")),\r\n                },\r\n            });\r\n\r\n            const data = response.data;\r\n            if (data.success) {\r\n                setToast(true);\r\n                emailjs.send('service_rdm14rp', 'template_j3tmv2e', templateParams, 'oQT0rtKXghENul39r')\r\n                    .then((response) => {\r\n                        console.log('SUCCESS...', response.text);\r\n                    }, (err) => {\r\n                        console.log('FAILED...', err);\r\n                    });\r\n            } else {\r\n                setToast(false);\r\n                console.log(data.message);\r\n            }\r\n        } catch (error) {\r\n            alert(error.response.data.message);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <div className='w-full p-3 rounded overflow-hidden mb-10 bg-slate-800 text-white'>\r\n            <h1 className='text-center text-2xl mb-1'>\r\n                {pickedClub.name} kulübü\r\n            </h1>\r\n            <p className='text-sm text-center my-5'>\r\n                {pickedClub.description}\r\n            </p>\r\n\r\n            <Link to={`/clubs/${pickedClub._id}`} className='text-red-600 underline cursor-pointer'>\r\n                Detay\r\n            </Link>\r\n\r\n\r\n            <div className='text-center mt-6' onClick={(e) => { setFirstPerm(true); e.target.style.display = \"none\" }}>\r\n                <button className=\"btn btn-success\">Kaydolmak ister misin?</button>\r\n            </div>\r\n            {sure &&\r\n                <div className='text-center mt-6' onClick={joinClub}>\r\n                    <button className=\"btn btn-success\">Emin misin? kulüp sahibine bildirim gidecek.</button>\r\n                </div>}\r\n            {toast && (\r\n                <div className=\"toast toast-top toast-end\">\r\n                    <div className=\"alert alert-success\">\r\n                        <span>Başarıyla Gönderildi.</span>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {toast === false && (\r\n                <div className=\"toast toast-top toast-end\">\r\n                    <div className=\"alert alert-danger\">\r\n                        <span>Bir Hata Oluştu</span>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ClubDetail"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}