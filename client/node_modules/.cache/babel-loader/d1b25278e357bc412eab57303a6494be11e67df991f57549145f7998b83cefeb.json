{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable jsx-a11y/anchor-is-valid */import React,{useEffect,useState}from'react';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function AdminManageUsers(_ref){var selectedUpdate=_ref.selectedUpdate;var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];useEffect(function(){fetch('http://192.168.1.29:4000/users/all',{method:\"GET\",headers:{\"Content-type\":\"application/json;charset=UTF-8\",authorization:JSON.parse(localStorage.getItem('authorization'))}}).then(function(res){return res.json();}).then(function(data){return setUsers(data.users);}).catch(function(err){return console.log(err);});},[]);var authHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e,process){var id,b,response,updatedUser,index;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:id=e.target.parentElement.parentElement.getAttribute('id');b={role:\"admin\",id:id,process:process,club:selectedUpdate};_context.next=4;return axios.post(\"http://192.168.1.29:4000/user/auth/\",b,{headers:{Accept:'application/json','Content-Type':'application/json',\"authorization\":JSON.parse(localStorage.getItem(\"authorization\"))}});case 4:response=_context.sent;if(response.status===200){updatedUser=response.data.user;// Find the index of the user to be updated in the users array\nindex=users.findIndex(function(user){return user._id===updatedUser._id;});if(index!==-1){// If the user is found in the users array, update the users state\nsetUsers(function(prevUsers){var newUsers=_toConsumableArray(prevUsers);// Create a new array to avoid directly mutating the state\nnewUsers[index]=updatedUser;// Update the user at the specified index\nreturn newUsers;// Set the new array as the updated users state\n});}}else{alert(\"Bir Hata Meydana Geldi!\");}case 6:case\"end\":return _context.stop();}},_callee);}));return function authHandler(_x,_x2){return _ref2.apply(this,arguments);};}();var removeUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var id,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:id=e.target.parentElement.parentElement.getAttribute('id');_context2.next=3;return axios.get(\"http://192.168.1.29:4000/user/remove/\".concat(id),{headers:{Accept:'application/json','Content-Type':'application/json',\"authorization\":JSON.parse(localStorage.getItem(\"authorization\"))}});case 3:response=_context2.sent;if(response.status===200){setUsers(users.filter(function(user){return user._id!==id;}));}else{alert(\"Bir Hata Meydana Geldi!\");}case 5:case\"end\":return _context2.stop();}},_callee2);}));return function removeUser(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"overflow-x-auto w-5/5 lg:w-3/5 rounded shadow-[0_2px_10px] shadow-blackA7 bg-slate-800 border\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center text-2xl text-bold underline text-white\",children:\"T\\xFCm \\xDCyeler\"}),users&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-zebra\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-white\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0130sim\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Yetkiler\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\xDCye Oldu\\u011Fu kul\\xFCpler\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Kurucu Oldu\\u011Fu Kul\\xFCpler\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Yetkilendir\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Sil\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{className:\"!bg-slate-800\",id:user._id,children:[/*#__PURE__*/_jsx(\"th\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.permissions.map(function(p){return/*#__PURE__*/_jsxs(\"a\",{children:[p,\" \"]});})}),/*#__PURE__*/_jsx(\"td\",{children:user.participatingClubs.map(function(p){return/*#__PURE__*/_jsx(\"li\",{children:p.name});})}),/*#__PURE__*/_jsx(\"td\",{children:user.ownering.map(function(o){return/*#__PURE__*/_jsx(\"a\",{children:o.name});})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-info my-2 text-xs\",onClick:function onClick(e){return authHandler(e,\"auth\");},children:\"Admin\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-info my-2 text-xs\",onClick:function onClick(e){return authHandler(e,\"unauth\");},children:\"unAdmin\"})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-error my-2 text-xs\",onClick:removeUser,children:\"Sil\"})})]});})})]})})]});}export default AdminManageUsers;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminManageUsers","_ref","selectedUpdate","_useState","undefined","_useState2","_slicedToArray","users","setUsers","fetch","method","headers","authorization","JSON","parse","localStorage","getItem","then","res","json","data","catch","err","console","log","authHandler","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","process","id","b","response","updatedUser","index","wrap","_callee$","_context","prev","next","target","parentElement","getAttribute","role","club","post","Accept","sent","status","user","findIndex","_id","prevUsers","newUsers","_toConsumableArray","alert","stop","_x","_x2","apply","arguments","removeUser","_ref3","_callee2","_callee2$","_context2","get","concat","filter","_x3","className","children","map","name","email","permissions","p","participatingClubs","ownering","o","onClick"],"sources":["C:/Users/youtu/OneDrive/Masaüstü/united-clubs/client/src/components/AdminManageUsers.js"],"sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from \"axios\";\r\n\r\n\r\nfunction AdminManageUsers({ selectedUpdate }) {\r\n    const [users, setUsers] = useState(undefined);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        fetch('http://192.168.1.29:4000/users/all', {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-type\": \"application/json;charset=UTF-8\",\r\n                authorization: JSON.parse(localStorage.getItem('authorization'))\r\n            },\r\n        })\r\n            .then(res => res.json())\r\n            .then(data => setUsers(data.users))\r\n            .catch(err => console.log(err));\r\n    }, []);\r\n\r\n\r\n    const authHandler = async (e, process) => {\r\n        const id = e.target.parentElement.parentElement.getAttribute('id');\r\n\r\n        const b = {\r\n            role: \"admin\",\r\n            id: id,\r\n            process,\r\n            club: selectedUpdate\r\n        };\r\n        const response = await axios.post(`http://192.168.1.29:4000/user/auth/`, b, {\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                \"authorization\": JSON.parse(localStorage.getItem(\"authorization\")),\r\n            },\r\n        });\r\n\r\n        if (response.status === 200) {\r\n            const updatedUser = response.data.user;\r\n\r\n            // Find the index of the user to be updated in the users array\r\n            const index = users.findIndex((user) => user._id === updatedUser._id);\r\n\r\n            if (index !== -1) {\r\n                // If the user is found in the users array, update the users state\r\n                setUsers((prevUsers) => {\r\n                    const newUsers = [...prevUsers]; // Create a new array to avoid directly mutating the state\r\n                    newUsers[index] = updatedUser; // Update the user at the specified index\r\n                    return newUsers; // Set the new array as the updated users state\r\n                });\r\n            }\r\n        } else {\r\n            alert(\"Bir Hata Meydana Geldi!\")\r\n        }\r\n    }\r\n\r\n    const removeUser = async (e) => {\r\n        const id = e.target.parentElement.parentElement.getAttribute('id');\r\n\r\n        const response = await axios.get(`http://192.168.1.29:4000/user/remove/${id}`, {\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n                \"authorization\": JSON.parse(localStorage.getItem(\"authorization\")),\r\n            },\r\n        });\r\n\r\n        if (response.status === 200) {\r\n            setUsers(users.filter(user => user._id !== id));\r\n        } else {\r\n            alert(\"Bir Hata Meydana Geldi!\")\r\n        }\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"overflow-x-auto w-5/5 lg:w-3/5 rounded shadow-[0_2px_10px] shadow-blackA7 bg-slate-800 border\">\r\n            <h1 className='text-center text-2xl text-bold underline text-white'>Tüm Üyeler</h1>\r\n            {users && (\r\n                <>\r\n                    <table className=\"table table-zebra\">\r\n                        {/* head */}\r\n                        <thead>\r\n                            <tr className='text-white'>\r\n                                <th>İsim</th>\r\n                                <th>Email</th>\r\n                                <th>Yetkiler</th>\r\n                                <th>Üye Olduğu kulüpler</th>\r\n                                <th>Kurucu Olduğu Kulüpler</th>\r\n                                <th>Yetkilendir</th>\r\n                                <th>Sil</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {users.map(user => (\r\n                                <tr className='!bg-slate-800' id={user._id}>\r\n                                    <th>{user.name}</th>\r\n                                    <td>{user.email}</td>\r\n                                    <td>{user.permissions.map((p) => <a>{p} </a>)}</td>\r\n                                    <td>{user.participatingClubs.map((p) => <li>{p.name}</li>)}</td>\r\n                                    <td>{user.ownering.map((o) => <a>{o.name}</a>)}</td>\r\n                                    <td>\r\n                                        <button className=\"btn btn-sm btn-info my-2 text-xs\" onClick={(e) => authHandler(e, \"auth\")}>Admin</button>\r\n                                        <button className=\"btn btn-sm btn-info my-2 text-xs\" onClick={(e) => authHandler(e, \"unauth\")}>unAdmin</button>\r\n                                    </td>\r\n                                    <td>\r\n                                        <button className=\"btn btn-sm btn-error my-2 text-xs\" onClick={removeUser}>Sil</button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AdminManageUsers"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}