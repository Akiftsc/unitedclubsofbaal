{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/youtu/OneDrive/Masa\\xFCst\\xFC/united-clubs/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import*as Form from'@radix-ui/react-form';import{useRef,useContext}from'react';import{useNavigate}from\"react-router-dom\";import axios from'axios';import{AuthContext}from'./context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var authContext=useContext(AuthContext);var password=useRef();var email=useRef();var navigate=useNavigate();/*    if (localStorage.getItem(\"authorization\") === null || localStorage.getItem(\"authorization\") === undefined) {\r\n           localStorage.setItem('authorization', JSON.stringify({ \"d\": \"I'm undefined\" }));\r\n       }\r\n    */var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var b,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();b={password:password.current.value,email:email.current.value};_context.prev=2;_context.next=5;return axios.post(\"http://192.168.1.29:4000/login\",JSON.stringify(b),{headers:{Accept:'application/json','Content-Type':'application/json'}});case 5:response=_context.sent;data=response.data;if(data.auth){localStorage.setItem('authorization',JSON.stringify(data.token));navigate(\"/profile\");}else{alert(\"Yanlış şifre veya email\");}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);console.log(\"**\");console.error(_context.t0);case 14:case\"end\":return _context.stop();}},_callee,null,[[2,10]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();var checkAdmin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var storedToken,response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:storedToken=JSON.parse(localStorage.getItem(\"authorization\")).d;if(!(storedToken!==null)){_context2.next=13;break;}_context2.prev=2;_context2.next=5;return axios.get(\"http://192.168.1.29:4000/checkadmin/\".concat(storedToken));case 5:response=_context2.sent;data=response.data;if(data.isAdmin){localStorage.setItem('authorization',JSON.stringify({d:data.token}));navigate(\"/profile\");}_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);console.error(_context2.t0);case 13:case\"end\":return _context2.stop();}},_callee2,null,[[2,10]]);}));return function checkAdmin(){return _ref2.apply(this,arguments);};}();if(localStorage.getItem(\"authorization\")!==null){checkAdmin();}return/*#__PURE__*/_jsxs(\"div\",{className:\"container-xl m-auto flex aling-center justify-center gap-5 flex-col\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl text-white text-center\",children:\"Giri\\u015F Yap.\"}),/*#__PURE__*/_jsxs(Form.Root,{className:\"px-10 margin-0\",children:[/*#__PURE__*/_jsxs(Form.Field,{className:\"grid mb-[10px]\",name:\"email\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-baseline justify-between\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"text-[15px] font-medium leading-[35px] text-white\",children:\"Email\"}),/*#__PURE__*/_jsx(Form.Message,{className:\"text-[13px] text-white opacity-[0.8]\",match:\"valueMissing\",children:\"L\\xFCtfen email giriniz.\"}),/*#__PURE__*/_jsx(Form.Message,{className:\"text-[13px] text-white opacity-[0.8]\",match:\"typeMismatch\",children:\"L\\xFCtfen email giriniz.\"})]}),/*#__PURE__*/_jsx(Form.Control,{asChild:true,children:/*#__PURE__*/_jsx(\"input\",{className:\"box-border w-full bg-blackA5 shadow-blackA9 inline-flex h-[35px] appearance-none items-center justify-center rounded-[4px] px-[10px] text-[15px] leading-none text-white shadow-[0_0_0_1px] outline-none hover:shadow-[0_0_0_1px_black] focus:shadow-[0_0_0_2px_black] selection:color-white selection:bg-blackA9\",type:\"email\",required:true,ref:email})})]}),/*#__PURE__*/_jsxs(Form.Field,{className:\"grid mb-[10px]\",name:\"email\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-baseline justify-between\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"text-[15px] font-medium leading-[35px] text-white\",children:\"\\u015Eifre\"}),/*#__PURE__*/_jsx(Form.Message,{className:\"text-[13px] text-white opacity-[0.8]\",match:\"valueMissing\",children:\"Bir \\u015Fifre yaz.\"}),/*#__PURE__*/_jsx(Form.Message,{className:\"text-[13px] text-white opacity-[0.8]\",match:\"typeMismatch\",children:\"Bir \\u015Fifre yaz.\"})]}),/*#__PURE__*/_jsx(Form.Control,{asChild:true,children:/*#__PURE__*/_jsx(\"input\",{className:\"box-border w-full bg-blackA5 shadow-blackA9 inline-flex h-[35px] appearance-none items-center justify-center rounded-[4px] px-[10px] text-[15px] leading-none text-white shadow-[0_0_0_1px] outline-none hover:shadow-[0_0_0_1px_black] focus:shadow-[0_0_0_2px_black] selection:color-white selection:bg-blackA9\",type:\"text\",required:true,ref:password})})]}),/*#__PURE__*/_jsx(Form.Submit,{asChild:true,children:/*#__PURE__*/_jsx(\"button\",{onClick:submitHandler,className:\"box-border w-full text-red-600 shadow-blackA7 hover:opacity-70 inline-flex h-[35px] items-center justify-center rounded-[4px] bg-blackA9 px-[15px] font-medium leading-none shadow-[0_2px_10px] focus:shadow-[0_0_0_2px] focus:shadow-black focus:outline-none mt-[10px]\",children:\"G\\xF6nder!\"})})]})]});}export default Login;","map":{"version":3,"names":["Form","useRef","useContext","useNavigate","axios","AuthContext","jsx","_jsx","jsxs","_jsxs","Login","authContext","password","email","navigate","submitHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","b","response","data","wrap","_callee$","_context","prev","next","preventDefault","current","value","post","JSON","stringify","headers","Accept","sent","auth","localStorage","setItem","token","alert","t0","console","log","error","stop","_x","apply","arguments","checkAdmin","_ref2","_callee2","storedToken","_callee2$","_context2","parse","getItem","d","get","concat","isAdmin","className","children","Root","Field","name","Label","Message","match","Control","asChild","type","required","ref","Submit","onClick"],"sources":["C:/Users/youtu/OneDrive/Masaüstü/united-clubs/client/src/Login.js"],"sourcesContent":["import * as Form from '@radix-ui/react-form';\r\nimport { useRef, useContext } from 'react';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport { AuthContext } from './context/AuthContext';\r\n\r\nfunction Login() {\r\n\r\n    const authContext = useContext(AuthContext);\r\n\r\n    const password = useRef();\r\n    const email = useRef();\r\n    const navigate = useNavigate();\r\n    /*    if (localStorage.getItem(\"authorization\") === null || localStorage.getItem(\"authorization\") === undefined) {\r\n           localStorage.setItem('authorization', JSON.stringify({ \"d\": \"I'm undefined\" }));\r\n       }\r\n    */\r\n    const submitHandler = async (e) => {\r\n        e.preventDefault();\r\n        const b = {\r\n            password: password.current.value,\r\n            email: email.current.value\r\n        };\r\n\r\n        try {\r\n            const response = await axios.post(\"http://192.168.1.29:4000/login\", JSON.stringify(b), {\r\n                headers: {\r\n                    Accept: 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                },\r\n            });\r\n\r\n            const data = response.data;\r\n            if (data.auth) {\r\n                localStorage.setItem('authorization', JSON.stringify(data.token));\r\n                navigate(\"/profile\");\r\n            } else {\r\n                alert(\"Yanlış şifre veya email\");\r\n            }\r\n        } catch (error) {\r\n            console.log(\"**\")\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n\r\n    const checkAdmin = async () => {\r\n        const storedToken = JSON.parse(localStorage.getItem(\"authorization\")).d;\r\n        if (storedToken !== null) {\r\n            try {\r\n                const response = await axios.get(`http://192.168.1.29:4000/checkadmin/${storedToken}`);\r\n                const data = response.data;\r\n                if (data.isAdmin) {\r\n                    localStorage.setItem('authorization', JSON.stringify({ d: data.token }));\r\n                    navigate(\"/profile\");\r\n                }\r\n            } catch (error) {\r\n                console.error(error);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    if (localStorage.getItem(\"authorization\") !== null) {\r\n        checkAdmin();\r\n    }\r\n\r\n\r\n    return (\r\n        <div className='container-xl m-auto flex aling-center justify-center gap-5 flex-col'>\r\n            <h1 className='text-2xl text-white text-center'>Giriş Yap.</h1>\r\n            <Form.Root className=\"px-10 margin-0\">\r\n                <Form.Field className=\"grid mb-[10px]\" name=\"email\">\r\n                    <div className=\"flex items-baseline justify-between\">\r\n                        <Form.Label className=\"text-[15px] font-medium leading-[35px] text-white\">Email</Form.Label>\r\n                        <Form.Message className=\"text-[13px] text-white opacity-[0.8]\" match=\"valueMissing\">\r\n                            Lütfen email giriniz.\r\n                        </Form.Message>\r\n                        <Form.Message className=\"text-[13px] text-white opacity-[0.8]\" match=\"typeMismatch\">\r\n                            Lütfen email giriniz.\r\n                        </Form.Message>\r\n                    </div>\r\n                    <Form.Control asChild>\r\n                        <input\r\n                            className=\"box-border w-full bg-blackA5 shadow-blackA9 inline-flex h-[35px] appearance-none items-center justify-center rounded-[4px] px-[10px] text-[15px] leading-none text-white shadow-[0_0_0_1px] outline-none hover:shadow-[0_0_0_1px_black] focus:shadow-[0_0_0_2px_black] selection:color-white selection:bg-blackA9\"\r\n                            type=\"email\"\r\n                            required\r\n                            ref={email}\r\n                        />\r\n                    </Form.Control>\r\n                </Form.Field>\r\n                <Form.Field className=\"grid mb-[10px]\" name=\"email\">\r\n                    <div className=\"flex items-baseline justify-between\">\r\n                        <Form.Label className=\"text-[15px] font-medium leading-[35px] text-white\">Şifre</Form.Label>\r\n                        <Form.Message className=\"text-[13px] text-white opacity-[0.8]\" match=\"valueMissing\">\r\n                            Bir şifre yaz.\r\n                        </Form.Message>\r\n                        <Form.Message className=\"text-[13px] text-white opacity-[0.8]\" match=\"typeMismatch\">\r\n                            Bir şifre yaz.\r\n                        </Form.Message>\r\n                    </div>\r\n                    <Form.Control asChild>\r\n                        <input\r\n                            className=\"box-border w-full bg-blackA5 shadow-blackA9 inline-flex h-[35px] appearance-none items-center justify-center rounded-[4px] px-[10px] text-[15px] leading-none text-white shadow-[0_0_0_1px] outline-none hover:shadow-[0_0_0_1px_black] focus:shadow-[0_0_0_2px_black] selection:color-white selection:bg-blackA9\"\r\n                            type='text'\r\n                            required\r\n                            ref={password}\r\n                        />\r\n                    </Form.Control>\r\n                </Form.Field>\r\n                <Form.Submit asChild>\r\n                    <button onClick={submitHandler} className=\"box-border w-full text-red-600 shadow-blackA7 hover:opacity-70 inline-flex h-[35px] items-center justify-center rounded-[4px] bg-blackA9 px-[15px] font-medium leading-none shadow-[0_2px_10px] focus:shadow-[0_0_0_2px] focus:shadow-black focus:outline-none mt-[10px]\">\r\n                        Gönder!\r\n                    </button>\r\n                </Form.Submit>\r\n            </Form.Root>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}